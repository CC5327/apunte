<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-regular.woff2 type=font/woff2 crossorigin><link rel=preload as=font href=/fonts/vendor/jost/jost-v4-latin-700.woff2 type=font/woff2 crossorigin><link rel=stylesheet href=/main.6201f5d795e66fbf05304d1348e60656f52a2bf20b7376034a0071179ec8a5881eb69432e4b8ae7f7c05a22afa7f9e33f628dca5b1d53f1dadacd7b3e6a86691.css integrity="sha512-YgH115Xmb78FME0TSOYGVvUqK/ILc3YDSgBxF57IpYgetpQy5Liuf3wFoir6f54z9ijcpbHVPx2trNez5qhmkQ==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><meta name=robots content="index, follow"><meta name=googlebot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><meta name=bingbot content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1"><title>Uso b谩sico de GDB - Introducci贸n a la Seguridad Computacional</title><meta name=description content="DCC universidad de Chile"><link rel=canonical href=/auxiliares/anexos/gdb/><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/logo_redondo.png"><meta name=twitter:title content="Uso b谩sico de GDB"><meta name=twitter:description content="GDB es una utilidad que permite depurar programas en varios lenguajes de programaci贸n. En el curso la usaremos para depurar programas en C.
  Para que el programa compilado pueda ser usado de forma adecuada en GDB, necesitan agregar la flag de compilaci贸n -g3, la cual almacena en el binario datos especiales para la depuraci贸n.  Ejecutar un programa en GDB Para ejecutar el c贸digo compilado en GDB, se usa el comando env - gdb <nombre_programa>, donde <nombre_programa> es el nombre del programa a depurar."><meta name=twitter:site content="@dccuchile"><meta name=twitter:creator content="@dccuchile"><meta property="og:title" content="Uso b谩sico de GDB"><meta property="og:description" content="GDB es una utilidad que permite depurar programas en varios lenguajes de programaci贸n. En el curso la usaremos para depurar programas en C.
  Para que el programa compilado pueda ser usado de forma adecuada en GDB, necesitan agregar la flag de compilaci贸n -g3, la cual almacena en el binario datos especiales para la depuraci贸n.  Ejecutar un programa en GDB Para ejecutar el c贸digo compilado en GDB, se usa el comando env - gdb <nombre_programa>, donde <nombre_programa> es el nombre del programa a depurar."><meta property="og:type" content="article"><meta property="og:url" content="/auxiliares/anexos/gdb/"><meta property="og:image" content="/logo_redondo.png"><meta property="article:published_time" content="2020-03-24T10:00:00-03:00"><meta property="article:modified_time" content="2022-02-07T23:44:42-03:00"><meta property="og:site_name" content="Introducci贸n a la Seguridad Computacional"><meta property="article:publisher" content="https://www.facebook.com/DCCUChile"><meta property="article:author" content="https://www.facebook.com/DCCUChile"><meta property="og:locale" content="es_CL"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"\/"},{"@type":"ListItem","position":2,"name":"Auxiliaresanexosgdb","item":"\/auxiliaresanexosgdb\/"}]}</script><meta name=theme-color content="#fff"><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest></head><body class="auxiliares single"><div class="header-bar fixed-top"></div><header class="navbar fixed-top navbar-expand-md navbar-light"><div class=container><input class="menu-btn order-0" type=checkbox id=menu-btn>
<label class="menu-icon d-md-none" for=menu-btn><span class=navicon></span></label><a class="navbar-brand order-1 order-md-0 mr-auto" href=/><img class=logo-light src=/images/banner.svg></img>
<img class=logo-dark src=/images/banner_dark.svg></img></a>
<button id=mode class="btn btn-link order-2 order-md-4" type=button aria-label="Toggle mode">
<span class=toggle-dark><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-moon"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg></span><span class=toggle-light><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-sun"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></span></button><ul class="navbar-nav social-nav order-3 order-md-5"><li class=nav-item><a class=nav-link href=https://github.com/cc5327/apunte><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg><span class="ml-2 sr-only">GitHub</span></a></li></ul><div class="collapse navbar-collapse order-4 order-md-1"><ul class="navbar-nav main-nav mr-auto order-5 order-md-2"><li class=nav-item><a class=nav-link href=/acerca>Info</a></li><li class=nav-item><a class=nav-link href=/auxiliares/enunciados/auxiliar-1>Auxiliares</a></li><li class=nav-item><a class=nav-link href=/tareas/>Tareas</a></li></ul><div class="break order-6 d-md-none"></div><form class="navbar-form flex-grow-1 order-7 order-md-3"><input id=userinput class="form-control is-search" type=search placeholder="Buscar Documentaci贸n..." aria-label="Buscar Documentaci贸n..." autocomplete=off><div id=suggestions class="shadow bg-white rounded"></div></form></div></div></header><div class="wrap container" role=document><div class=content><div class="row flex-xl-nowrap"><div class="col-lg-5 col-xl-4 docs-sidebar"><nav class=docs-links aria-label="Main navigation"><h3>anexos</h3><ul class=list-unstyled><li><a class=docs-link href=/auxiliares/anexos/padding-oracle/>Padding Oracle Attack a CBC</a></li><li><a class=docs-link href=/auxiliares/anexos/python-bytes/>Strings y Bytes en Python 3</a></li><li><a class="docs-link active" href=/auxiliares/anexos/gdb/>Uso b谩sico de GDB</a></li></ul><h3>enunciados</h3><ul class=list-unstyled><li><a class=docs-link href=/auxiliares/enunciados/auxiliar-1/>Auxiliar 1</a></li></ul></nav></div><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>Contenidos</h3><nav id=TableOfContents><ul><li><a href=#ejecutar-un-programa-en-gdb>Ejecutar un programa en GDB</a></li><li><a href=#usar-argumentos>Usar argumentos</a></li><li><a href=#explorar-c贸digo-asm>Explorar c贸digo asm</a></li><li><a href=#colocar-breakpoints>Colocar Breakpoints</a></li><li><a href=#flujo-del-programa>Flujo del programa</a></li><li><a href=#informaci贸n-general>Informaci贸n general</a></li><li><a href=#ejemplos-de-uso>Ejemplos de uso:</a><ul><li><a href=#c贸mo-determinar-el-estado-de-la-pila->驴C贸mo determinar el estado de la pila ?</a></li></ul></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Uso b谩sico de GDB</h1><p class=lead></p><p>GDB es una utilidad que permite depurar programas en varios lenguajes de programaci贸n. En el curso la usaremos para depurar programas en C.</p><div class="alert alert-warning d-flex" role=alert><div class="flex-shrink-1 alert-icon"></div><div class=w-100>Para que el programa compilado pueda ser usado de forma adecuada en GDB, necesitan agregar la flag de compilaci贸n <code>-g3</code>, la cual almacena en el binario datos especiales para la depuraci贸n.</div></div><h2 id=ejecutar-un-programa-en-gdb>Ejecutar un programa en GDB<a href=#ejecutar-un-programa-en-gdb class=anchor aria-hidden=true>#</a></h2><p>Para ejecutar el c贸digo compilado en GDB, se usa el comando <code>env - gdb &lt;nombre_programa></code>, donde <code>&lt;nombre_programa></code> es el nombre del programa a depurar.</p><p>(驴Por qu茅 partimos el comando con <code>env -</code>? Porque las variables de entorno afectar谩n la ubicaci贸n de nuestra pila. Pueden ver <a href=https://stackoverflow.com/a/17775966>esta pregunta de Stack Overflow</a> para m谩s informaci贸n.)</p><p>Al partir GDB, el programa no se ejecuta todav铆a, pero GDB muestra una consola interactiva. Para conocer los comandos utilizables, es posible ejecutar <code>help</code>.</p><h2 id=usar-argumentos>Usar argumentos<a href=#usar-argumentos class=anchor aria-hidden=true>#</a></h2><p>Para ejecutar el c贸digo compilado en GDB y usar argumentos en el ejecutable, se usa el comando <code>gdb --args &lt;nombre_programa> &lt;args...></code>, donde <code>&lt;nombre_programa></code> es el nombre del programa a depurar y <code>&lt;args></code> es uno o m谩s argumentos que recibir谩 el programa a depurar.</p><h2 id=explorar-c贸digo-asm>Explorar c贸digo asm<a href=#explorar-c贸digo-asm class=anchor aria-hidden=true>#</a></h2><p>Para explorar una funci贸n en asm, se puede ejecutar el comando <code>disassemble &lt;nombre_func></code> o <code>disass &lt;nombre_func></code>, donde <code>&lt;nombre_func></code> es el nombre de la funci贸n que se quiere revisar. Tambi茅n se puede usar una direcci贸n de memoria en vez de un nombre de funci贸n. Si no colocan nada luego de <code>disassemble</code> o <code>disass</code>, se mostrar谩 el c贸digo asm cercano a la l铆nea que se est谩 ejecutando en ese momento.</p><h2 id=colocar-breakpoints>Colocar Breakpoints<a href=#colocar-breakpoints class=anchor aria-hidden=true>#</a></h2><p>Antes de la ejecuci贸n del programa, es necesario colocar <em>breakpoints</em> o zonas en las cuales el c贸digo dejar谩 de ejecutarse, a la espera del control de nosotros.</p><p>Los breakpoints se colocan con el comando <code>break &lt;f></code>, donde <code>&lt;f></code> corresponde a la funci贸n en la cual se detendr谩 la ejecuci贸n del programa, una direcci贸n de memoria o el n煤mero de la l铆nea en el c贸digo fuente.</p><p>Una idea para partir debuggeando en GDB es colocar un <code>break</code> en la funci贸n <code>main</code>. De esta forma podemos controlar el flujo del programa desde su inicio. Esto se hace escribiendo <code>break main</code>.</p><h2 id=flujo-del-programa>Flujo del programa<a href=#flujo-del-programa class=anchor aria-hidden=true>#</a></h2><p>Para partir el programa en GDB, puedes escribir <code>r</code>. El programa se detendr谩 tanto si espera input interactivo (funci贸n <code>gets()</code>) como si se coloc贸 un <em>breakpoint</em> en alguna funci贸n que se est茅 ejecutando.</p><p>En el caso de detenci贸n por un breakpoint, se pueden usar las siguientes opciones:</p><ul><li><code>frame &lt;i></code> o <code>f &lt;i></code>: les muestra la instrucci贸n en la que se encuentran <code>i</code> frames m谩s arriba del que se encuentran (conteo parte en 0). Pueden omitir el par谩metro <code>&lt;i></code> para que GDB les muestre la l铆nea de c贸digo del frame actual.</li><li><code>continue &lt;i></code> o <code>c &lt;i></code>: la cual contin煤a el flujo normal del programa, salt谩ndose <code>i</code> breakpoints. Si omiten <code>&lt;i></code>, se contin煤a solamente hasta el breakpoint siguiente.</li><li><code>step &lt;i></code> o <code>s &lt;i></code>: la cual avanza <code>i</code> instrucciones en el programa. Si esta instrucci贸n es una funci贸n, contin煤a revisando dentro del frame de la funci贸n. Es posible omitir el par谩metro <code>&lt;i></code> para avanzar solamente una instrucci贸n.</li><li><code>stepi &lt;count></code> o <code>si &lt;count></code>: les permite avanzar a <code>i</code> instrucciones en asm. Para ver en qu茅 instrucci贸n de asm van, pueden escribir <code>disass</code> (Una flecha en el lado izquierdo de la pantalla indica la instrucci贸n actual). Al igual que con <code>step</code>, en caso de no colocar un n煤mero,</li><li><code>next</code> o <code>n</code>: la cual pasa a la siguiente instrucci贸n en el programa dentro del frame actual, es decir, si la instrucci贸n es una funci贸n, la ejecuta sin pausar y se detiene justo despu茅s que 茅sta retorna.</li><li><code>finish</code> o <code>fin</code>: La cual termina el frame actual y se detiene apenas se vuelve al frame anterior.</li></ul><p>Mientras se van ejecutando estos pasos, GDB muestra la l铆nea de c贸digo en la que va el programa, lo que ayuda a ubicarse en su flujo.</p><h2 id=informaci贸n-general>Informaci贸n general<a href=#informaci贸n-general class=anchor aria-hidden=true>#</a></h2><p>Existen comandos que muestran informaci贸n general del estado actual del programa:</p><ul><li><code>info args</code> muestra los argumentos recibidos por la funci贸n actual.</li><li><code>info all-registers</code> muestra el valor actual de todos los registros del procesador.</li><li><code>info frame</code> muestra informaci贸n sobre el frame actual.</li><li><code>info locals</code> muestra las variables locales definidas hasta este momento.</li><li><code>x/&lt;n>&lt;type>&lt;size> &lt;addr></code>, donde <code>&lt;addr></code> corresponde a una direcci贸n de memoria o el nombre de un registro (<code>$rsp</code> por ejemplo para el tope de la pila), <code>n</code> representa a la cantidad de valores a leer desde ese punto, <code>type</code> corresponde al tipo de dato a interpretar y <code>size</code> corresponde al tama帽o del dato; permite mostrar los <code>n</code> valores de tipo <code>type</code> en tama帽o <code>size</code> desde la direcci贸n <code>addr</code>. Algunas opciones de tama帽o 煤tiles son:<ul><li><code>g</code>: 1 palabra grande (64 bits)</li><li><code>w</code>: 1 palabra (32 bits)</li><li><code>h</code>: 1 media palabra (16 bits)</li><li><code>b</code>: 1 byte (8 bits)
Mientras que algunas opciones de tipo 煤tiles son:</li><li><code>o</code>: como un n煤mero octal</li><li><code>x</code>: hexadecimal</li><li><code>d</code>: decimal con signo</li><li><code>u</code>: decimal sin signo</li><li><code>t</code>: binario</li><li><code>f</code>: coma flotante</li><li><code>a</code>: direcci贸n de memoria</li><li><code>c</code>: caracter</li><li><code>s</code>: Cadena de texto</li><li><code>i</code>: Instrucci贸n (como si fuera ASM)</li></ul></li><li><code>p/&lt;type> &lt;var></code>, donde <code>&lt;var></code> corresponde a una variable y <code>type</code> a un tipo al igual que en el comando anterior, permite examinar el valor de ese espacio.</li><li><code>help &lt;cmd></code> les muestra ayuda sobre alg煤n comando. Ejemplo: <code>help c</code>.</li></ul><h2 id=ejemplos-de-uso>Ejemplos de uso:<a href=#ejemplos-de-uso class=anchor aria-hidden=true>#</a></h2><h3 id=c贸mo-determinar-el-estado-de-la-pila->驴C贸mo determinar el estado de la pila ?<a href=#c贸mo-determinar-el-estado-de-la-pila- class=anchor aria-hidden=true>#</a></h3><ul><li>Correr el programa con GDB</li><li>Colocar un breakpoint cerca de la variable que se quiere analizar (por ejemplo, en el nombre de la funci贸n): <code>b func_name</code>.</li><li>Correr el programa con <code>r</code>. Se detendr谩 al inicio de la funci贸n.</li><li>Avanzar con <code>n</code> hasta pasar la definici贸n/asignaci贸n de la variable</li><li>escribir <code>x/5xg $rsp</code> mostrar谩 el valor de las 5 primeras palabras grandes de la pila. Al mismo tiempo, se muestra la direcci贸n de memoria de cada valor en color azul al inicio de cada fila.</li><li>Presionar <code>c</code> para que el programa contin煤e hasta su final.</li></ul><p class=edit-page><a href=https://github.com/cc5327/apunte/blob/main/content/auxiliares/anexos/gdb.md><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2"><path d="M17 3a2.828 2.828.0 114 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>Editar en GitHub</a>
<span class=date-info><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>Modificado por 煤ltima vez el 07/02/2022 a las 23:44:42 hrs.</span></p><div class="docs-navigation d-flex justify-content-between"><a href=/auxiliares/anexos/python-bytes/><div class="card my-1"><div class="card-body py-2">&larr; Strings y Bytes en Python 3</div></div></a></div></main></div></div></div><footer class="footer text-muted"><div class=container><div class=row><div class="col-lg-8 order-last order-lg-first"><ul class=list-inline><li class=list-inline-item>Sitio generado con <a href=https://gohugo.io/>Hugo</a> y <a href=https://getdoks.org/>Doks</a></li></ul></div><div class="col-lg-8 order-first order-lg-last text-lg-right"><ul class=list-inline><a href="http://creativecommons.org/licenses/by-sa/4.0/?ref=chooser-v1" target=_blank rel="license noopener noreferrer" style=display:inline-block>CC BY-SA 4.0<img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1"><img style=height:22px!important;margin-left:3px;vertical-align:text-bottom src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1"></a></ul></div></div></div></footer><script src=/main.2507c05f91ee016250e43b67b3d342f5a0d9d4dc5264f76cdc4518cd36a9e04cf3022ce8362802e618d8130b6733b53ee845a49e67229eeb3d3e70347db96a2b.js integrity="sha512-JQfAX5HuAWJQ5Dtns9NC9aDZ1NxSZPds3EUYzTap4EzzAizoNigC5hjYEwtnM7U+6EWknmcinus9PnA0fblqKw==" crossorigin=anonymous defer></script><script src=/index.min.95c2fb57984ca6cb1914e6658c1095cc47073a398c805d5ee842114fab739d64b4d5cd0626cda1be56c95e7f8c6e9c4d231866d1065245c873d731a6a7b01c5e.js integrity="sha512-lcL7V5hMpssZFOZljBCVzEcHOjmMgF1e6EIRT6tznWS01c0GJs2hvlbJXn+MbpxNIxhm0QZSRchz1zGmp7AcXg==" crossorigin=anonymous defer></script><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};window.addEventListener('load',(event)=>{document.querySelectorAll("mjx-container").forEach(function(x){x.parentElement.classList+='has-jax'})});</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script></body></html>